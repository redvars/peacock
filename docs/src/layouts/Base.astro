---
import GoogleAnalyticsScript from '../components/analytics/GoogleAnalyticsScript.astro';
interface Props {
  title?: string;
  description?: string;
  root?: boolean;
  keywords?: any;
}

const { title, root, description, keywords } = Astro.props;
import site from '../_data/site.json';
import '../styles/base.layout.scss';

const isProd = import.meta.env.PROD;
let envProps;

if (isProd) {
  envProps = site['prod'];
} else {
  envProps = site['dev'];
}

function getKeywords() {
  if (keywords) {
    return Astro.props.title + ', ' + keywords;
  } else {
    return 'Web component, ' + Astro.props.title;
  }
}
const pageTitle = title ? `${title}  &middot; ${site.title}` : `${site.title} &middot; ${site.tagline}`
---

<!DOCTYPE html>
<html lang='en'>
<head>
  <!-- Title -->
  <title set:html={pageTitle}></title>

  <!-- Required Meta Tags Always Come First -->
  <meta charset="utf-8"/>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no' />
  <link rel="sitemap" href="/sitemap-index.xml" />

  <link rel='canonical' href={Astro.url + ''} />

  <!-- Author Meta Tags -->
  <meta name='author' content={site.author} />
  <meta name='copyright' content={`(c) ${new Date().getFullYear()} ${site.author}`} />

  <!--  Meta tags -->
  <meta name='keywords' content={getKeywords()} />
  <meta name='description' content={description ? description : site.description} />

  <!-- Favicon -->
  <link rel='shortcut icon' href='/favicon.svg' />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:wght@100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

  <!-- GoatUI scripts -->
  <script type='module' src={envProps.script}></script>

  <script type='module' src='/assets/goatui-dev/build/peacock.esm.js'></script>
  <link rel='stylesheet' href='/assets/goatui-dev/build/assets/styles/theme.css'/>

  <!--<script type='module' define:vars={{ envProps }}>
    if (!window.customElements.get('p-icon')) {
      import(envProps.fallbackScript);

      var fileref = document.createElement("link");
      fileref.rel = "stylesheet";
      fileref.type = "text/css";
      fileref.href = envProps.fallbackThemeCss;
      document.getElementsByTagName("head")[0].appendChild(fileref)
      console.warn("USING FALLBACK PEACOCK");
    }
  </script>-->
</head>
<body>

<slot />

<pc-notification-manager position='bottom-right'></pc-notification-manager>

<slot name='page-end'/>


<GoogleAnalyticsScript/>


</body>
</html>
