---
const GOOGLE_ICONS_URL = "https://fonts.google.com/icons";
---

<pc-text type="body">
  Google icons are used by the <code>pc-icon</code> component. You can find the name from Google Icons{" "}
  <a class='pc-link' href={GOOGLE_ICONS_URL}>{GOOGLE_ICONS_URL}</a>.
</pc-text>



<div class='playground-tab'>
  <div class='playground-container' id='playground-controller'>
    <div class='playground'>
      <div class='demo-area' id='demo-area'></div>
      <div class='demo-controls' id='demo-controls'>

        <goat-select label='Icon' id='comp-select' search='contains' placeholder='Select' clearable></goat-select>

      </div>
    </div>
    <div class='code-editor-container'>
      <pc-code-editor language='html' class='code-editor no-border' theme='vs-dark'></pc-code-editor>
    </div>
  </div>
</div>

<script is:inline>
  class Playground {

    constructor(elm) {
      this.elm = elm;
    }

    init() {
      const $codeEditor = this.elm.querySelector('.code-editor');
      const $demoArea = this.elm.querySelector('.demo-area');

      $codeEditor.value = `<pc-icon name='alarm'></pc-icon>
<pc-icon src='https://icons.getbootstrap.com/assets/icons/bug.svg'></pc-icon>`;
      $codeEditor.addEventListener('pc-code-editor--change', (e) => {
        $demoArea.innerHTML = e.target.value;
      });
      $demoArea.innerHTML = $codeEditor.value;
    }

    populateDropdown(elm, prop, items, value) {
      elm.items = items.map((item) => {
        return {
          label: item,
          value: item,
        };
      });
      elm.value = value;
      elm.addEventListener('goat-select--change', (evt) => {
        this.updateProperty(prop, evt.detail.value);
      });
    }

    updateProperty(propertyName, propertyValue) {
      const $codeEditor = this.elm.querySelector('.code-editor');
      const $demoArea = this.elm.querySelector('.demo-area');
      if (propertyValue === '' || propertyValue === false) {
        $demoArea.children[0].removeAttribute(propertyName);
      } else {
        $demoArea.children[0].setAttribute(propertyName, propertyValue);
      }
      $codeEditor.value = $demoArea.innerHTML;
    }
  }


  const playground = new Playground(document.getElementById('playground-controller'));
  playground.init();

  const $dropDown = document.getElementById('comp-select');
  $dropDown.items = [];
  fetch('/assets/icons.json').then(res => res.json()).then(data => {
    $dropDown.items = data.map(item => {
      return {
        label: item.label,
        value: item.name,
        icon: item.name,
      };
    });
  });
  $dropDown.value = 'alarm';
  $dropDown.addEventListener('goat-select--change', function(evt) {
    playground.updateProperty('name', evt.detail.value);
  });
</script>
